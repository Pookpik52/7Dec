<!DOCTYPE html>
<html>
<head>
  <title>Admin</title>
</head>
<body>

  <h2>Admin Dashboard</h2>

  <!-- ðŸ‘‡ à¹ƒà¸ªà¹ˆà¸•à¸£à¸‡à¸™à¸µà¹‰à¹€à¸¥à¸¢ -->
  <div id="payments"></div>

  <script>
    async function loadPayments() {
      const res = await fetch('/api/admin');
      const data = await res.json();

      const container = document.getElementById("payments");
      container.innerHTML = "";

      data.payments.forEach(payment => {
        container.innerHTML += `
          <div>
            <p>${payment.name}</p>
            <p>${payment.email}</p>
            <p>${payment.status}</p>
            <button onclick="approve(${payment.id})">Approve</button>
            <hr>
          </div>
        `;
      });
    }

    async function approve(id) {
      await fetch('/api/approve', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ id })
      });

      loadPayments();
    }

    loadPayments();
  </script>

</body>
</html>
